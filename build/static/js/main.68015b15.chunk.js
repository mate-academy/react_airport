(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(2),i=a.n(c),o=(a(14),a(15),a(3)),u=a(4),l=a(6),s=a(5),d=a(7);var h=function(e){var t=e.data;return r.a.createElement("tr",null,t.map(function(e){return r.a.createElement("td",null,e)}))};var m=function(e){var t=e.data.map(function(e){var t=[];return Object.keys(e).forEach(function(a){e[a]&&"id"!==a&&t.push(e[a])}),r.a.createElement(h,{data:t,key:e.id})});return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Terminal"),r.a.createElement("th",null,"Time"),r.a.createElement("th",null,"Destination"),r.a.createElement("th",null,"Airline"),r.a.createElement("th",null,"Flight"),r.a.createElement("th",null,"Status"))),r.a.createElement("tbody",null,t))},f=864e5;function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new Date((new Date).getTime()+f*e),a="".concat(t.getDate()),n="".concat(t.getMonth()+1),r=t.getFullYear();return"".concat(v(a),"-").concat(v(n),"-").concat(r)}function v(e){return 1===e.length?"0".concat(e):e}function y(e){var t=new Date(e),a="".concat(t.getHours()),n="".concat(t.getMinutes());return{day:v("".concat(t.getDate())),hour:v(a),minutes:v(n)}}function E(e){var t=e.ID,a=e.term,n=e.airline,r=e.status,c=e.codeShareData,i=e.timeDepExpectCalc,o=e.timeToStand,u=e.timeDepFact,l=e.timeLandFact,s=y(i||o),d=y(u||l);return{terminal:a,time:"".concat(s.hour,":").concat(s.minutes),destination:e["airportToID.city_en"]||e["airportFromID.city_en"],airline:n.en.name,flight:c[0].codeShare[0].match(/[A-Z]/)?c[0].codeShare:c[0].icao+c[0].codeShare,status:g(r,"".concat(d.hour,":").concat(d.minutes)),id:t}}function g(e,t){switch(e){case"CX":return"Cancelled";case"LN":return"Landed ".concat(t);case"GC":return"Gate closed";case"DP":return"Departed at ".concat(t);case"CK":return"Check-in";case"FR":return"In flight";default:return"On time"}}var D=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).state={loaded:!1,listOfFlights:[],departures:!0,currentDate:p(),currentRadio:"today",currentTab:"departures"},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentDidUpdate",value:function(e,t){this.state.currentDate!==t.currentDate&&this.loadData()}},{key:"loadData",value:function(){var e=this;this.setState(function(e){return{loaded:!1,requested:!0}});var t=this.state.currentDate,a="https://api.iev.aero/api/flights/".concat(t),n=fetch(a).then(function(e){return e.json()}).then(function(e){return e.body});Promise.resolve(n).then(function(t){e.setState(function(e){return{loaded:!0,listOfFlights:t,requested:!1}})})}},{key:"changeTab",value:function(e){this.state.currentTab!==e&&this.setState(function(t){return{departures:!t.departures,currentTab:e}})}},{key:"changeDate",value:function(e,t){this.state.currentRadio!==t&&this.setState(function(a){return{currentDate:p(e),currentRadio:t}})}},{key:"render",value:function(){var e=this.state,t=e.departures,a=e.listOfFlights,n=e.loaded,c=e.currentDate,i=e.currentRadio;if(e.requested)return r.a.createElement("div",null,"Loading data...");if(n){var o=c.slice(0,2),u=t?a.departure.filter(function(e){return y(e.timeDepExpectCalc).day===o}).map(E):a.arrival.filter(function(e){return y(e.timeToStand).day===o}).map(E);return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{type:"button",onClick:this.changeTab.bind(this,"departures")},"Departures"),r.a.createElement("button",{type:"button",onClick:this.changeTab.bind(this,"arrivals")},"Arrivals"),r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"date",value:"yesterday",onClick:this.changeDate.bind(this,-1,"yesterday"),checked:"yesterday"===i}),"Yesterday"),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"date",value:"today",onClick:this.changeDate.bind(this,0,"today"),checked:"today"===i}),"Today"),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"date",value:"tomorrow",onClick:this.changeDate.bind(this,1,"tomorrow"),checked:"tomorrow"===i}),"Tomorrow")),r.a.createElement(m,{data:u}))}return r.a.createElement("div",null,"Something went wrong")}}]),t}(r.a.Component);var b=function(){return r.a.createElement(D,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,a){e.exports=a(16)}},[[8,1,2]]]);
//# sourceMappingURL=main.68015b15.chunk.js.map